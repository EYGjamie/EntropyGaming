<!-- webapp/internal/templates/forum/categories.html -->
{% extends "base.html" %}

{% block title %}Kategorien - Forum{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/forum.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/forum-category-create.css') }}">
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="forum-container">
        <div class="forum-header">
            <h1><i class="bi bi-tags"></i> Forum Kategorien</h1>
            <div class="forum-actions">
                <a href="{{ url_for('forum.index') }}" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Zur端ck zum Forum
                </a>
                <button class="btn btn-primary" onclick="showCreateCategoryModal()">
                    <i class="bi bi-plus-lg"></i> Neue Kategorie
                </button>
            </div>
        </div>

        <!-- Categories List -->
        <div class="categories-list">
            {% if categories %}
                {% for category in categories %}
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-info">
                            <h3 class="category-name">{{ category.name }}</h3>
                            {% if category.description %}
                            <p class="category-description">{{ category.description }}</p>
                            {% endif %}
                        </div>
                        <div class="category-stats">
                            <div class="stat-number">{{ category.post_count }}</div>
                            <div class="stat-label">Posts</div>
                            <br>
                        </div>
                    </div>
                    
                    <div class="category-actions">
                        <a href="{{ url_for('forum.index', category=category.id) }}" class="btn btn-outline">
                            <i class="bi bi-eye"></i> Posts anzeigen
                        </a>
                    </div>
                    <br>
                    <hr class="category-divider">
                    <br>
                </div>
                {% endfor %}
            {% else %}
                <div class="no-categories">
                    <div class="no-categories-icon">
                        <i class="bi bi-tags"></i>
                    </div>
                    <h3>Keine Kategorien vorhanden</h3>
                    <p>Erstelle die erste Kategorie f端r das Forum.</p>
                    <button class="btn btn-primary" onclick="showCreateCategoryModal()">
                        <i class="bi bi-plus-lg"></i> Erste Kategorie erstellen
                    </button>
                </div>
            {% endif %}
        </div>

    </div>
</div>

<!-- Create Category Modal -->
<div id="createCategoryModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="bi bi-plus-circle"></i> Neue Kategorie erstellen</h3>
            <button class="modal-close" onclick="hideCreateCategoryModal()">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        
        <form method="POST" action="{{ url_for('forum.create_category') }}" id="createCategoryForm">
            <div class="modal-body">
                <div class="form-group">
                    <label for="categoryName" class="form-label">
                        <i class="bi bi-tag"></i> Kategoriename *
                    </label>
                    <input type="text" 
                           id="categoryName" 
                           name="name" 
                           class="form-input" 
                           placeholder="z.B. Allgemein, Projekte, Support..."
                           maxlength="100"
                           required>
                    <div class="form-hint">Eindeutiger Name f端r die Kategorie (max. 100 Zeichen)</div>
                </div>

                <div class="form-group">
                    <label for="categoryDescription" class="form-label">
                        <i class="bi bi-file-text"></i> Beschreibung
                    </label>
                    <textarea id="categoryDescription" 
                              name="description" 
                              class="form-textarea" 
                              placeholder="Beschreibe wof端r diese Kategorie verwendet wird..."
                              rows="3"
                              maxlength="500"></textarea>
                    <div class="form-hint">Optionale Beschreibung (max. 500 Zeichen)</div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="hideCreateCategoryModal()">
                    <i class="bi bi-x-lg"></i> Abbrechen
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-check-lg"></i> Kategorie erstellen
                </button>
            </div>
        </form>
    </div>
</div>

{% if error %}
<div class="alert alert-error">
    {{ error }}
</div>
{% endif %}

<script src="{{ url_for('static', filename='js/forum.js') }}"></script>

{% endblock %}
